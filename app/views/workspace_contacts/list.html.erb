<%= link_to image_tag("/images/icons/left.png"), workspace_groups_path(current_workspace.id) %>
<%= I18n.t('group.contacts.title')+' :' %>
<br /><br />
<% form_for :contacts_workspaces, :url => list_workspace_workspace_contacts_path(current_workspace.id), :html => { :method => :post } do |f| %>
<%= params[:order] == 'created_at' ? I18n.t('workspace_contact.list.order_by_time') : link_to(I18n.t('workspace_contact.list.order_by_time'), list_workspace_workspace_contacts_path(current_workspace.id)+'?order=created_at') %> |
<%= params[:order] == 'email' ? I18n.t('workspace_contact.list.order_by_email') : link_to(I18n.t('workspace_contact.list.order_by_email'), list_workspace_workspace_contacts_path(current_workspace.id)+'?order=email') %> &&
<%= params[:restriction] == 'all' ? I18n.t('workspace_contact.list.all_contacts') : link_to(I18n.t('workspace_contact.list.all_contacts'), list_workspace_workspace_contacts_path(current_workspace.id)+'?restriction=all') %> |
<%= params[:restriction] == 'non_linked' ? I18n.t('workspace_contact.list.non_linked_to_a_group') : link_to(I18n.t('workspace_contact.list.non_linked_to_a_group'), list_workspace_workspace_contacts_path(current_workspace.id)+'?restriction=non_linked') %>
<br /><br />
<% @current_objects.each do |member| %>
  <%= "#{member['email']} (#{member['first_name']} #{member['last_name']}) -- #{member['contact_type']} -- (#{member['state']})" %>
  <%= check_box_tag 'contacts_workspaces_ids[]', member['id'] %>
  <% if member['permission'] %>
    <% if member['contact_type']=='Person' %>
    <%= link_to image_tag('/images/icons/play.png', :width => "20"), workspace_person_path(current_workspace.id, member['contact_id']) %>
    <%= link_to image_tag('/images/icons/pencil.png', :width => "20"), edit_workspace_person_path(current_workspace.id, member['contact_id']) %>
    <%= link_to image_tag('/images/icons/delete.png', :width => "20"), workspace_person_path(current_workspace.id, member['contact_id']), :method => :delete, :confirm => I18n.t('workspace_contact.list.delete_person_alert_confirm') %><br />
    <% end %>
    <% if member['contact_type']=='WebsiteContact' %>
    <%= link_to image_tag('/images/icons/play.png', :width => "20"), workspace_website_contact_path(current_workspace.id, member['contact_id']) %>
    <%= link_to image_tag('/images/icons/pencil.png', :width => "20"), edit_workspace_website_contact_path(current_workspace.id, member['contact_id']) %>
    <%= link_to image_tag('/images/icons/delete.png', :width => "20"), workspace_website_contact_path(current_workspace.id, member['contact_id']), :method => :delete, :confirm => 'Be careful, this will remove definitively the person, use remove if you just want to remove it from that workspace, so are you sure ?' %><br />
    <% end %>
  <% end %>
  <br />
<% end %>
<br /><br />
<u><%= I18n.t('workspace_contact.list.action') %> :</u><br />
<%= radio_button_tag 'to_do', 'remove' %> <%= I18n.t('workspace_contact.list.remove_these_contacts_from_this_worksapce') %>  <br />
<%= radio_button_tag 'to_do', 'link' %> <%= I18n.t('workspace_contact.list.link_these_contacts_to_group') %> : <%= select_tag 'group_id', options_for_select(current_workspace.groups.all(:order => 'title ASC').map{ |e| [e.title, e.id] }) %> <br />
<%= radio_button_tag 'to_do', 'change_state' %> <%= I18n.t('workspace_contact.list.change_state_to') %> : <%= select_tag 'state', options_for_select({I18n.t('general.common_word.subscribed').capitalize => 'subscribed', I18n.t('general.common_word.unsubscribed').capitalize => 'unsubscribed'}, 'subscribed' ) %> <br />
<br /><br />
  <%= submit_tag I18n.t('workspace_contact.list.do_the_action') %>
<% end %>
<br /><br />
---------------------
<br /><br />
<%= link_to I18n.t('group.contacts.select_contacts'), select_workspace_workspace_contacts_path(current_workspace.id) %>
<br /><br />
<%= link_to I18n.t('group.contacts.add_people'), new_workspace_person_path(current_workspace.id) %>
<br /><br />
<%= link_to I18n.t('people.index.import_people_from_csv'), import_people_workspace_people_path %>

